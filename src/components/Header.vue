<template>
  <div>
    <v-navigation-drawer v-model="sidebar" temporary left hide-overlay fixed>
      <v-list>
        <v-list-item
          v-for="item in menuItems"
          :key="item.title"
          :to="item.path"
        >
          <v-list-item-action>
            <v-icon>{{ item.icon }}</v-icon>
          </v-list-item-action>
          <v-list-item-content>{{ item.title }}</v-list-item-content>
        </v-list-item>

        <v-list-item>
          <v-list-item-action>
            <v-icon>fas fa-sign-out-alt</v-icon>
          </v-list-item-action>
          <v-list-item-content @click="logOut">LogOut</v-list-item-content>
        </v-list-item>
      </v-list>
    </v-navigation-drawer>

    <v-app-bar color="#001851" dark app>
      <span class="hidden-sm-and-up">
        <v-app-bar-nav-icon @click="sidebar = !sidebar"></v-app-bar-nav-icon>
      </span>
      <!-- <v-toolbar-title> -->
      <router-link to="/" tag="span" style="cursor: pointer">
        <template>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            style="isolation:isolate"
            viewBox="0 0 480 480"
            width="180"
            height="180"
          >
            <path
              d=" M 92.48 246.064 L 92.48 266.209 L 82.391 266.209 L 82.391 215.795 L 117.688 215.795 L 117.688 225.885 L 92.48 225.885 L 92.48 235.975 L 107.598 235.975 L 107.598 246.064 L 92.48 246.064 L 92.48 246.064 Z  M 134.504 213.58 L 134.504 266.209 L 124.836 266.209 L 124.836 213.58 L 134.504 213.58 L 134.504 213.58 Z  M 181.203 247.049 L 181.203 247.049 L 181.203 247.049 Q 181.203 251.268 179.691 254.906 L 179.691 254.906 L 179.691 254.906 Q 178.18 258.545 175.578 261.199 L 175.578 261.199 L 175.578 261.199 Q 172.977 263.854 169.479 265.383 L 169.479 265.383 L 169.479 265.383 Q 165.98 266.912 161.973 266.912 L 161.973 266.912 L 161.973 266.912 Q 158 266.912 154.502 265.383 L 154.502 265.383 L 154.502 265.383 Q 151.004 263.854 148.385 261.199 L 148.385 261.199 L 148.385 261.199 Q 145.766 258.545 144.254 254.906 L 144.254 254.906 L 144.254 254.906 Q 142.742 251.268 142.742 247.049 L 142.742 247.049 L 142.742 247.049 Q 142.742 242.76 144.254 239.104 L 144.254 239.104 L 144.254 239.104 Q 145.766 235.447 148.385 232.793 L 148.385 232.793 L 148.385 232.793 Q 151.004 230.139 154.502 228.627 L 154.502 228.627 L 154.502 228.627 Q 158 227.115 161.973 227.115 L 161.973 227.115 L 161.973 227.115 Q 165.98 227.115 169.479 228.539 L 169.479 228.539 L 169.479 228.539 Q 172.977 229.963 175.578 232.582 L 175.578 232.582 L 175.578 232.582 Q 178.18 235.201 179.691 238.875 L 179.691 238.875 L 179.691 238.875 Q 181.203 242.549 181.203 247.049 Z  M 171.535 247.049 L 171.535 247.049 L 171.535 247.049 Q 171.535 244.729 170.779 242.848 L 170.779 242.848 L 170.779 242.848 Q 170.023 240.967 168.723 239.613 L 168.723 239.613 L 168.723 239.613 Q 167.422 238.26 165.682 237.539 L 165.682 237.539 L 165.682 237.539 Q 163.941 236.818 161.973 236.818 L 161.973 236.818 L 161.973 236.818 Q 160.004 236.818 158.264 237.539 L 158.264 237.539 L 158.264 237.539 Q 156.523 238.26 155.24 239.613 L 155.24 239.613 L 155.24 239.613 Q 153.957 240.967 153.219 242.848 L 153.219 242.848 L 153.219 242.848 Q 152.48 244.729 152.48 247.049 L 152.48 247.049 L 152.48 247.049 Q 152.48 249.229 153.219 251.092 L 153.219 251.092 L 153.219 251.092 Q 153.957 252.955 155.24 254.326 L 155.24 254.326 L 155.24 254.326 Q 156.523 255.697 158.264 256.488 L 158.264 256.488 L 158.264 256.488 Q 160.004 257.279 161.973 257.279 L 161.973 257.279 L 161.973 257.279 Q 163.941 257.279 165.682 256.541 L 165.682 256.541 L 165.682 256.541 Q 167.422 255.803 168.723 254.467 L 168.723 254.467 L 168.723 254.467 Q 170.023 253.131 170.779 251.232 L 170.779 251.232 L 170.779 251.232 Q 171.535 249.334 171.535 247.049 Z "
              fill="rgb(255,255,255)"
            />
            <path
              d=" M 237.043 228.627 L 237.043 252.604 L 237.043 252.604 Q 237.043 255.557 235.918 258.176 L 235.918 258.176 L 235.918 258.176 Q 234.793 260.795 232.842 262.729 L 232.842 262.729 L 232.842 262.729 Q 230.891 264.662 228.271 265.787 L 228.271 265.787 L 228.271 265.787 Q 225.652 266.912 222.664 266.912 L 222.664 266.912 L 222.664 266.912 Q 219.992 266.912 217.531 265.98 L 217.531 265.98 L 217.531 265.98 Q 215.07 265.049 213.066 263.256 L 213.066 263.256 L 213.066 263.256 Q 211.098 265.049 208.654 265.98 L 208.654 265.98 L 208.654 265.98 Q 206.211 266.912 203.504 266.912 L 203.504 266.912 L 203.504 266.912 Q 200.516 266.912 197.914 265.787 L 197.914 265.787 L 197.914 265.787 Q 195.313 264.662 193.361 262.729 L 193.361 262.729 L 193.361 262.729 Q 191.41 260.795 190.285 258.176 L 190.285 258.176 L 190.285 258.176 Q 189.16 255.557 189.16 252.604 L 189.16 252.604 L 189.16 228.627 L 198.758 228.627 L 198.758 252.604 L 198.758 252.604 Q 198.758 253.588 199.127 254.449 L 199.127 254.449 L 199.127 254.449 Q 199.496 255.311 200.146 255.961 L 200.146 255.961 L 200.146 255.961 Q 200.797 256.611 201.658 256.98 L 201.658 256.98 L 201.658 256.98 Q 202.52 257.35 203.504 257.35 L 203.504 257.35 L 203.504 257.35 Q 204.488 257.35 205.367 256.98 L 205.367 256.98 L 205.367 256.98 Q 206.246 256.611 206.914 255.961 L 206.914 255.961 L 206.914 255.961 Q 207.582 255.311 207.951 254.449 L 207.951 254.449 L 207.951 254.449 Q 208.32 253.588 208.32 252.604 L 208.32 252.604 L 208.32 228.627 L 217.883 228.627 L 217.883 252.604 L 217.883 252.604 Q 217.883 253.588 218.27 254.449 L 218.27 254.449 L 218.27 254.449 Q 218.656 255.311 219.307 255.961 L 219.307 255.961 L 219.307 255.961 Q 219.957 256.611 220.818 256.98 L 220.818 256.98 L 220.818 256.98 Q 221.68 257.35 222.664 257.35 L 222.664 257.35 L 222.664 257.35 Q 223.648 257.35 224.527 256.98 L 224.527 256.98 L 224.527 256.98 Q 225.406 256.611 226.057 255.961 L 226.057 255.961 L 226.057 255.961 Q 226.707 255.311 227.094 254.449 L 227.094 254.449 L 227.094 254.449 Q 227.48 253.588 227.48 252.604 L 227.48 252.604 L 227.48 228.627 L 237.043 228.627 L 237.043 228.627 Z "
              fill="rgb(252,197,37)"
            />
            <path
              d=" M 298.051 215.795 L 298.051 251.795 L 298.051 251.795 Q 298.051 254.924 296.873 257.684 L 296.873 257.684 L 296.873 257.684 Q 295.695 260.443 293.639 262.5 L 293.639 262.5 L 293.639 262.5 Q 291.582 264.557 288.822 265.734 L 288.822 265.734 L 288.822 265.734 Q 286.063 266.912 282.934 266.912 L 282.934 266.912 L 282.934 266.912 Q 280.121 266.912 277.537 265.928 L 277.537 265.928 L 277.537 265.928 Q 274.953 264.943 272.879 263.045 L 272.879 263.045 L 272.879 263.045 Q 270.805 264.943 268.203 265.928 L 268.203 265.928 L 268.203 265.928 Q 265.602 266.912 262.789 266.912 L 262.789 266.912 L 262.789 266.912 Q 259.66 266.912 256.9 265.734 L 256.9 265.734 L 256.9 265.734 Q 254.141 264.557 252.084 262.5 L 252.084 262.5 L 252.084 262.5 Q 250.027 260.443 248.85 257.684 L 248.85 257.684 L 248.85 257.684 Q 247.672 254.924 247.672 251.795 L 247.672 251.795 L 247.672 215.795 L 257.762 215.795 L 257.762 251.795 L 257.762 251.795 Q 257.762 252.85 258.148 253.781 L 258.148 253.781 L 258.148 253.781 Q 258.535 254.713 259.221 255.398 L 259.221 255.398 L 259.221 255.398 Q 259.906 256.084 260.82 256.471 L 260.82 256.471 L 260.82 256.471 Q 261.734 256.857 262.789 256.857 L 262.789 256.857 L 262.789 256.857 Q 263.844 256.857 264.758 256.471 L 264.758 256.471 L 264.758 256.471 Q 265.672 256.084 266.357 255.398 L 266.357 255.398 L 266.357 255.398 Q 267.043 254.713 267.43 253.781 L 267.43 253.781 L 267.43 253.781 Q 267.816 252.85 267.816 251.795 L 267.816 251.795 L 267.816 215.795 L 277.906 215.795 L 277.906 251.795 L 277.906 251.795 Q 277.906 252.85 278.293 253.781 L 278.293 253.781 L 278.293 253.781 Q 278.68 254.713 279.365 255.398 L 279.365 255.398 L 279.365 255.398 Q 280.051 256.084 280.965 256.471 L 280.965 256.471 L 280.965 256.471 Q 281.879 256.857 282.934 256.857 L 282.934 256.857 L 282.934 256.857 Q 283.988 256.857 284.902 256.471 L 284.902 256.471 L 284.902 256.471 Q 285.816 256.084 286.502 255.398 L 286.502 255.398 L 286.502 255.398 Q 287.188 254.713 287.592 253.781 L 287.592 253.781 L 287.592 253.781 Q 287.996 252.85 287.996 251.795 L 287.996 251.795 L 287.996 215.795 L 298.051 215.795 L 298.051 215.795 Z  M 320.352 218.326 L 320.352 218.326 L 320.352 218.326 Q 320.352 219.662 319.842 220.822 L 319.842 220.822 L 319.842 220.822 Q 319.332 221.982 318.453 222.844 L 318.453 222.844 L 318.453 222.844 Q 317.574 223.705 316.396 224.215 L 316.396 224.215 L 316.396 224.215 Q 315.219 224.725 313.883 224.725 L 313.883 224.725 L 313.883 224.725 Q 312.547 224.725 311.369 224.215 L 311.369 224.215 L 311.369 224.215 Q 310.191 223.705 309.33 222.844 L 309.33 222.844 L 309.33 222.844 Q 308.469 221.982 307.959 220.822 L 307.959 220.822 L 307.959 220.822 Q 307.449 219.662 307.449 218.326 L 307.449 218.326 L 307.449 218.326 Q 307.449 217.025 307.959 215.848 L 307.959 215.848 L 307.959 215.848 Q 308.469 214.67 309.33 213.809 L 309.33 213.809 L 309.33 213.809 Q 310.191 212.947 311.369 212.438 L 311.369 212.438 L 311.369 212.438 Q 312.547 211.928 313.883 211.928 L 313.883 211.928 L 313.883 211.928 Q 315.219 211.928 316.396 212.438 L 316.396 212.438 L 316.396 212.438 Q 317.574 212.947 318.453 213.809 L 318.453 213.809 L 318.453 213.809 Q 319.332 214.67 319.842 215.848 L 319.842 215.848 L 319.842 215.848 Q 320.352 217.025 320.352 218.326 Z  M 318.699 228.557 L 318.699 266.209 L 309.031 266.209 L 309.031 228.557 L 318.699 228.557 L 318.699 228.557 Z  M 358.402 256.646 L 358.402 266.209 L 327.008 266.209 L 342.863 238.189 L 327.008 238.189 L 327.008 228.627 L 358.402 228.627 L 342.547 256.646 L 358.402 256.646 L 358.402 256.646 Z  M 399.125 235.307 L 381.125 256.998 L 381.125 256.998 Q 381.688 257.174 382.25 257.227 L 382.25 257.227 L 382.25 257.227 Q 382.813 257.279 383.375 257.279 L 383.375 257.279 L 383.375 257.279 Q 384.781 257.279 386.082 256.893 L 386.082 256.893 L 386.082 256.893 Q 387.383 256.506 388.525 255.785 L 388.525 255.785 L 388.525 255.785 Q 389.668 255.064 390.564 254.027 L 390.564 254.027 L 390.564 254.027 Q 391.461 252.99 392.023 251.725 L 392.023 251.725 L 399.055 258.791 L 399.055 258.791 Q 397.719 260.689 395.979 262.201 L 395.979 262.201 L 395.979 262.201 Q 394.238 263.713 392.217 264.768 L 392.217 264.768 L 392.217 264.768 Q 390.195 265.822 387.963 266.367 L 387.963 266.367 L 387.963 266.367 Q 385.73 266.912 383.375 266.912 L 383.375 266.912 L 383.375 266.912 Q 379.402 266.912 375.904 265.436 L 375.904 265.436 L 375.904 265.436 Q 372.406 263.959 369.787 261.322 L 369.787 261.322 L 369.787 261.322 Q 367.168 258.686 365.656 255.047 L 365.656 255.047 L 365.656 255.047 Q 364.145 251.408 364.145 247.049 L 364.145 247.049 L 364.145 247.049 Q 364.145 242.584 365.656 238.893 L 365.656 238.893 L 365.656 238.893 Q 367.168 235.201 369.787 232.6 L 369.787 232.6 L 369.787 232.6 Q 372.406 229.998 375.904 228.557 L 375.904 228.557 L 375.904 228.557 Q 379.402 227.115 383.375 227.115 L 383.375 227.115 L 383.375 227.115 Q 385.73 227.115 387.98 227.678 L 387.98 227.678 L 387.98 227.678 Q 390.23 228.24 392.252 229.295 L 392.252 229.295 L 392.252 229.295 Q 394.273 230.35 396.031 231.879 L 396.031 231.879 L 396.031 231.879 Q 397.789 233.408 399.125 235.307 L 399.125 235.307 L 399.125 235.307 Z  M 374.867 252.041 L 386.047 237.205 L 386.047 237.205 Q 385.379 236.959 384.729 236.889 L 384.729 236.889 L 384.729 236.889 Q 384.078 236.818 383.375 236.818 L 383.375 236.818 L 383.375 236.818 Q 381.406 236.818 379.666 237.539 L 379.666 237.539 L 379.666 237.539 Q 377.926 238.26 376.643 239.596 L 376.643 239.596 L 376.643 239.596 Q 375.359 240.932 374.621 242.813 L 374.621 242.813 L 374.621 242.813 Q 373.883 244.693 373.883 247.049 L 373.883 247.049 L 373.883 247.049 Q 373.883 247.576 373.936 248.244 L 373.936 248.244 L 373.936 248.244 Q 373.988 248.912 374.111 249.598 L 374.111 249.598 L 374.111 249.598 Q 374.234 250.283 374.41 250.916 L 374.41 250.916 L 374.41 250.916 Q 374.586 251.549 374.867 252.041 L 374.867 252.041 L 374.867 252.041 Z "
              fill="rgb(255,255,255)"
            />
          </svg>
        </template>
      </router-link>

      <!-- </v-toolbar-title> -->
      <v-spacer></v-spacer>
      <v-toolbar-items v-if="role === 'bank'" class="hidden-xs-only">
        <v-btn text>Balance: {{ balance }}</v-btn>
      </v-toolbar-items>
      <v-spacer></v-spacer>
      <v-toolbar-items class="hidden-xs-only">
        <v-btn text v-for="item in menuItems" :key="item.title" :to="item.path">
          <!-- <v-icon left dark>{{ item.icon }}</v-icon> -->
          {{ item.title }}
        </v-btn>
        <v-btn text @click="logOut">
          <v-icon left>fas fa-sign-out-alt</v-icon>LogOut
        </v-btn>
      </v-toolbar-items>
    </v-app-bar>
  </div>
</template>

<script>
import { myBalance } from "../plugins/getWeb3";

export default {
  name: "App",
  props: {
    role: String
  },
  data() {
    return {
      appTitle: "Flowwize",
      sidebar: false,
      balance: 0
    };
  },
  computed: {
    menuItems() {
      if (this.role === "user") {
        return [
          {
            title: "Loan Request",
            path: "/request",
            icon: "fas fa-sticky-note"
          },
          { title: "My Request", path: "/requests", icon: "fas fa-copy" },
          {
            title: "My Offer",
            path: "/offers",
            icon: "fas fa-hand-holding-usd"
          },
          { title: "Upload", path: "/upload", icon: "fas fa-file-upload" }
        ];
      }
      if (this.role === "bank") {
        return [
          { title: "Loan Request", path: "/bankRequest", icon: "fas fa-users" },
          { title: "My Offer", path: "/bankOffer", icon: "fas fa-users" }
        ];
      }
      return null;
    }
  },
  mounted() {
    myBalance(this.$store.getters.user.wallet).then(balance => {
      this.balance = balance;
    });
  },
  methods: {
    logOut() {
      this.$store
        .dispatch({
          type: "logOut"
        })
        .then(() => {
          this.$router.replace("/login");
        });
    }
  }
};
</script>
<style></style>
